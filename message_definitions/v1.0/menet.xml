<?xml version="1.0"?>
<mavlink>
    <version>0</version>
    <dialect>0</dialect>
    <enums>
        <enum name="MAV_CMD">
            <description>Commands to be executed by the MAV. They can be executed on user request, or as part of a
                mission script. If the action is used in a mission, the parameter mapping to the waypoint/mission
                message is as follows: Param 1, Param 2, Param 3, Param 4, X: Param 5, Y:Param 6, Z:Param 7. This
                command list is similar what ARINC 424 is for commercial aircraft: A data format how to interpret
                waypoint/mission data. NaN and INT32_MAX may be used in float/integer params (respectively) to indicate
                optional/default values (e.g. to use the component's current yaw or latitude rather than a specific
                value). See https://mavlink.io/en/guide/xml_schema.html#MAV_CMD for information about the structure of
                the MAV_CMD entries
            </description>
            <entry value="8100" name="MAV_CMD_ENABLE_TETHER_POWER" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Power on/off a tethered system
                </description>
                <param index="1" label="POWER_STATE" minValue="0" maxValue="1" increment="1">
                    Power state to set. 1 for on, 0 for off.
                </param>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8101" name="MAV_CMD_PREPARE_TO_LAUNCH_RECOVER" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Level platform in preparation for launch/recovery
                </description>
                <param index="1" reserved="true" default="NaN"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8102" name="MAV_CMD_SECURE_AIRCRAFT" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    SECURE/UNSECURE Aircraft in preparation for launch/recovery
                </description>
                <param index="1" label="LOCK_STATE" minValue="0" maxValue="1" increment="1">
                    Aircraft Secure state to set. 1 for secured. 0 for unsecured.
                </param>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8103" name="MAV_CMD_STOW_AIRCRAFT" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Once Aircraft lands, call this function to fully retract platform legs
                    before allowing vehicle to move
                </description>
                <param index="1" reserved="true" default="NaN"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8104" name="MAV_CMD_PLATFORM_FLIGHT_CONFIG" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Move securing feet out of launch config to flight config so securing feet
                    do not interfere with tether
                </description>
                <param index="1" reserved="true" default="NaN"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8300" name="MAV_CMD_TETHER_TENSION" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Set the tether tension: 0=off(0 oz), 1=fly(16 oz), 2=retract(32 oz), 3=recover(60 oz)
                </description>
                <param index="1" label="TETHER_TENSION" minValue="0" maxValue="3" increment="1"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8301" name="MAV_CMD_REEL_BRAKE" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Set the tether reel brake on/off: 0=off, 1=on
                </description>
                <param index="1" label="REEL_BRAKE" minValue="0" maxValue="1" increment="1"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8302" name="MAV_CMD_DRONE_POWER" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Turn drone power(HVDC) on/off: 0=off, 1=on
                </description>
                <param index="1" label="DRONE_POWER" minValue="0" maxValue="1" increment="1"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8303" name="MAV_CMD_GCU_READY" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Restarts the python server allowing java commands to control Raspberry Pi GPIO pins.
                    Send this command if GCU_STATUS.py_server_state = 0
                </description>
                <param index="1" label="GCU_READY" minValue="0" maxValue="1" increment="1"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
            <entry value="8304" name="MAV_CMD_BATTERY_BACKUP" hasLocation="false" isDestination="false">
                <wip/>
                <description>
                    Turn GCU battery backup on/off: 0=off, 1=on
                </description>
                <param index="1" label="BATTERY_BACKUP" minValue="0" maxValue="1" increment="1"/>
                <param index="2" reserved="true" default="NaN"/>
                <param index="3" reserved="true" default="NaN"/>
                <param index="4" reserved="true" default="NaN"/>
                <param index="5" reserved="true" default="NaN"/>
                <param index="6" reserved="true" default="NaN"/>
                <param index="7" reserved="true" default="NaN"/>
            </entry>
        </enum>
    </enums>
    <messages>
        <message id="8200" name="REEL_CONTROL">
            <description>Reel Control</description>
            <field type="uint8_t" name="set_reel_motor_state">Motor State (0 for off, 1 for on)</field>
            <field type="float" name="set_tension" units="lbs">Tension</field>
        </message>
        <message id="8201" name="REEL_STATUS">
            <description>Reel Status</description>
            <field type="uint8_t" name="motor_fault_state">Motor Fault State</field> <!-- 0 for Bad, 1 for Normal -->
            <field type="float" name="actual_tension" units="lbs">Actual Tension</field>
            <field type="float" name="deployment_speed" units="ft/s">Deployment Speed</field>
            <field type="float" name="deployment_length" units="ft">Deployment Length</field>
        </message>
        <message id="8202" name="LEVEL_PLATFORM_STATUS">
            <description>Reel Status</description>
            <field type="uint8_t" name="aircraft_secure_state">Aircraft Secure State
            </field> <!-- 0 for unlocked, 1 for locked, 2 for flight config, 3 for unknown-->
            <field type="uint8_t" name="in_progress">In Progress</field> <!-- 0 for no, 1 for yes -->
            <field type="float" name="platform_pitch">Platform Pitch</field> <!-- last read data on Platform PITCH-->
            <field type="float" name="platform_roll">Platform Roll</field> <!-- last read data on Platform ROLL-->
            <field type="uint8_t" name="platform_stowed">Platform Stowed</field> <!--0 for no, 1 for yes-->
            <field type="uint8_t" name="current_process">Current Process
            </field> <!--0: standby, 1: Leveling, 2: Unsecuring, 3: Securing, 4: Stowing-->
        </message>

        <message id="8203" name="GCU_STATUS">
            <description>Reel Status</description>
            <field type="uint8_t" name="py_server_state">Python server listening
            </field> <!-- 0=no (needs reset), 1=OK to launch and fly-->
            <field type="uint8_t" name="tension_state">Current tension
            </field> <!-- 0=off, 1=flying, 2=retracting, 3=recovering-->
            <field type="uint8_t" name="brake_state">Current reel brake</field> <!-- 0=off, 1=on -->
            <field type="uint8_t" name="drone_power">Current drone power(HVDC)</field> <!--0=off, 1=on-->
            <field type="float" name="ac_volts">Current AC input volts</field> <!-- GCU input voltage nnn.n-->
            <field type="float" name="ac_amps">Current amps being drawen</field> <!-- GCU+aircraft amps nnn.n-->
            <field type="float" name="ac_watts">Current watts being used</field> <!-- GCU+aircraft watts nnnn.n-->
        </message>
    </messages>
</mavlink>
